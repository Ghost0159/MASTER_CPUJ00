<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>OS_InitAlloc</TITLE>
<LINK rel="stylesheet" href="../../css/nitro.css" type="text/css">
</HEAD>
<BODY>
<H1 align="left">OS_InitAlloc</H1>
<H2>構文</H2>
<DL>
  <DD>
  <PRE><CODE>#include &lt;nitro/os.h&gt;</CODE></PRE>
  <PRE><CODE>void* OS_InitAlloc( OSArenaId id, void* arenaStart, void* arenaEnd, int maxHeaps );
  </CODE></PRE>
</DL>
<H2>引数</H2>
<TABLE border="1" width="100%">
  <TBODY>
    <TR>
      <TD width="13%"><EM><STRONG>id</STRONG></EM></TD>
      <TD width="87%">メモリ割り当てシステムを初期化するアリーナのアリーナID</TD>
    </TR>
    <TR>
      <TD><B><I>arenaStart</I></B></TD>
      <TD>アリーナの下位境界アドレス</TD>
    </TR>
    <TR>
      <TD><B><I>arenaEnd</I></B></TD>
      <TD>アリーナの上位境界アドレス</TD>
    </TR>
    <TR>
      <TD><B><I>maxHeap</I></B></TD>
      <TD>そのアリーナに確保可能な最大ヒープ数</TD>
    </TR>
  </TBODY>
</TABLE>
<H2>返り値</H2>
<P>ヒープ情報のための領域をアリーナ先頭に取った後の、実際のアリーナ下位境界アドレス。<BR>
32バイトアラインメントされています。</P>
<H2>説明</H2>
<P>メモリ割り当てシステムの初期化を行ないます。</P>
<P>アリーナID <B><I>id</I></B> で指定されるアリーナでヒープを作成する前に１度だけ呼ぶ必要があります。<BR>
アリーナIDの値については <A href="../arena/OS_InitArena.html"><CODE>OS_InitArena()</CODE></A> を参照してください。</P>
<P>アリーナの先頭に、ヒープのための情報領域を確保します。<CODE>OS_InitAlloc()</CODE> した後に返るアドレスがその領域を確保した後のアリーナの下位境界アドレス（先頭アドレス）となりますので、<CODE><A href="../arena/OS_SetArenaLo.html">OS_Set*ArenaLo()</A></CODE> で設定し直してください。</P>
<BLOCKQUOTE>(例)<BR>
<CODE><BR>
void* nstart;<BR>
<BR>
// メインメモリ上に、アリーナの領域全体をヒープ用領域として初期化<BR>
// ヒープは最大3つと宣言<BR>
nstart = OS_InitAlloc( OS_ARENA_MAIN, OS_GetMainArenaLo(), OS_GetMainArenaHi(),
3 );<BR>
<BR>
// アリーナの下位境界アドレス<BR>
OS_SetMainArenaLo( nstart );<BR>
</CODE><BR>
</BLOCKQUOTE>
<P>設定をやり直す場合は、<CODE><A href="OS_ClearAlloc.html">OS_ClearAlloc()</A></CODE> でアリーナ上のメモリ割り当てシステムの情報をすべてクリアする必要があります。</P>
<H2>参照</H2>
<P><CODE><A href="../arena/OS_SetArenaLo.html">OS_Set*ArenaLo</A>, <A href="OS_CreateHeap.html">OS_CreateHeap</A>, <A href="OS_ClearAlloc.html">OS_ClearAlloc</A><BR>
</CODE></P>
<H2>履歴</H2>
<P>2004/08/30 <CODE>OS_ClearAlloc</CODE> の記述を追加<BR>
2004/07/06 例を追加<BR>
2004/01/06 初版</P>
</BODY>
</HTML>